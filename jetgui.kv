<jetGUIRoot>:
    orientation: "vertical"

    ActionBar:
        ActionView:
            ActionPrevious:
                title: "Alpha Version 1.2.0"
                with_previous: False
            ActionOverflow:
                ActionButton:
                    text: "Kivy Settings"
                    on_press: app.open_settings()


    ScreenManager:
        id: kivy_screen_manager
        StartScreen:
            name: "start_screen"
        MonitorScreen:
            name: "monitor_screen"
        AboutScreen:
            id: about_screen
            name: "about_screen"
        PhoneScreen:
            id: phone_screen
            name: "phone_screen"
        ScanningScreen:
            id: scanning_screen
            name: "scanning_screen"
        AvailableDevScreen:
            id: available_dev_screen
            name: "available_dev_screen"


<StartScreen@Screen>:
    BoxLayout:
        orientation: "vertical"
        padding: root.width * .02, root.height * .02
        spacing: min(root.width, root.height) * .02

        Label:
            text: "[b]JET Monitoring Systems[/b]"
            markup: True
            font_size: root.height / 20

        Button:
            text: "Add a Device"
            font_size: 20
            on_release: app.root.changeScreen(self.text.lower())

        Button:
            text: "Remove Device"
            font_size: 20
            on_release: #TODO

        Button:
            text: "Monitor Mode"
            font_size: 20
            on_release: app.root.changeScreen(self.text.lower())

        Button:
            text: "About this App"
            font_size: 20
            on_release: app.root.changeScreen(self.text.lower())

<MonitorScreen@Screen>:
    on_enter: test.runMode()
    Test:
        id: test
        Button:
            text: "Exit Monitor Mode"
            size_hint: (.3,.1)
            pos_hint: {'x': 0, 'y': 0}
            on_release: test.exitMode()

<ScanningScreen@Screen>:
    FloatLayout:
        orientation: "vertical"

        Label:
            text_size: self.size
            pos_hint: {'x': 0, 'y': 0.7}
            font_size: root.height / 15
            markup: True
            text: app.scanText()

        Button:
            size_hint: (.75, .15)
            pos_hint: {'center_x': .5, 'center_y': .4}
            text: "[b]Start the scan! (Bluetooth is enabled and my device is visible!)[/b]"
            markup: True
            font_size: 20
            on_release: root.scanTransition()


<AvailableDevScreen@Screen>:
    on_enter: available_devices.generateStack()
    FloatLayout
        orientation: "vertical"

        Label:
            text_size: self.size
            font_size: root.height / 15
            pos_hint: {'x': 0, 'y': 0.86}
            markup: True
            text: "Please select your device below:"

        AvailableDevices:
            id: available_devices
            orientation: "vertical"
            spacing: min(root.width, root.height) * .02
            pos_hint: {'center_x': .56, 'center_y': .3}

        Button:
            size_hint: (.2, .1)
            text: "[b]I dont see my device?[/b]"
            markup: True
            on_release: available_devices.noDevFound()
            pos_hint: {'x': 0.75, 'y': 0.85}


<AboutScreen@Screen>:
    BoxLayout:
        orientation: "vertical"
        padding: root.width * .02, root.height * .02
        Label:
            text: app.getText()
            halign: "center"
            markup: True
            font_size: root.height / 20
            text_size: self.width, None
            center_y: .5

        Button:
            text: "Go Back"
            size_hint: (.1,.1)
            on_release: app.root.onBackBtn()


<PhoneScreen@Screen>:
    phone_number: phone_number
    FloatLayout:
        orientation: "vertical"
        Label:
            text_size: self.size
            text: "\nPlease enter your phone number (only digits!):"
            halign: "left"
            valign: "top"
            markup: True
            font_size: root.height / 15

        Label:
            id: phone_number
            text: ""
            text_size: self.size
            halign: "center"
            pos_hint: {'y': 0.6}
            markup: True
            font_size: 40

        Button:
            size_hint: (.1, .1)
            text: "Go Back"
            on_release: app.root.onBackBtn()

        KeyPad:

<PairPopup>:
    on_open: self.pairDevices()
    on_dismiss: self.connDevices()
    size_hint: .8, .8
    title: "Last Step!"
    title_align: "center"
    valign: "center"
    title_size: 30
    auto_dismiss: False
    BoxLayout:
        orientation: "vertical"
        padding: root.width * .02, root.height * .02
        spacing: min(root.width, root.height) * .02

        Label:
            text: app.getLabel()
            halign: "center"
            font_size: root.height / 13
            text_size: self.width, None
            center_y: .5

        Label:
            text: "Searching..."
            font_size: root.height / 13
            text_size: self.width, None
            center_y: .5

<PhonePopup>:
    size_hint: .8, .8
    title: "Please Verify your Phone Number:"
    title_size: root.height * .05
    auto_dismiss: False
    message: message
    yes_button: yes_button
    no_button: no_button
    BoxLayout:
        orientation: "vertical"
        padding: root.width * .02, root.height * .02
        spacing: min(root.width, root.height) * .02

        Label:
            id: message
            text: ""
            halign: "center"
            font_size: root.height / 10
            text_size: self.width, None
            center_y: .5

        Button:
            id: yes_button
            text: "Yep! That's it."
            size_hint: 1, None
            height: root.height / 8
            on_release: root.moveOn()

        Button:
            id: no_button
            text: "Nope! That's not right!"
            size_hint: 1, None
            height: root.height / 8
            on_release: root.stayHere()
